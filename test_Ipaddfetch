import pytest
from unittest.mock import MagicMock

# Import the IPInfoApp class from your main script
from Ipaddfetch import IPInfoApp

@pytest.fixture
def mock_tk(monkeypatch):
    # Mock tkinter.Tk() to prevent actual window creation
    tk_mock = MagicMock()
    monkeypatch.setattr("tkinter.Tk", tk_mock)
    return tk_mock

@pytest.fixture
def app(mock_tk):
    # Use the IPInfoApp class from your main script
    app = IPInfoApp()
    yield app
    app.destroy()

def test_fetch_info(app):
    app.ip_entry.insert(0, "8.8.8.8")  # Insert a sample IP address
    app.fetch_button.invoke()  # Trigger the fetch info button
    assert app.text_widget.get("1.0", "end") != "Invalid IP address format."  # Check if the text widget contains valid information

# Add more test functions as needed
